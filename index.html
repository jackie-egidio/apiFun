<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <!-- <script src="api.js" type="text/javascript"></script> -->
        <meta charset="utf-8">
        <script>
            function getFavQ() {
                // make request
                request = new XMLHttpRequest();
                console.log("1 - request object created");

                // open request file
                request.open("GET", "/api/quotes/:quote_id", true);
                console.log("2 - opened request file");

                // set up event handler/callback
                request.onreadystatechange = function() {
                    console.log("3 - readystatechange event fired");

                    if (request.readyState == 4 && request.status == 200) {
                        // checks if successful
                        console.log("5 - response received");
                        result = request.responseText;
                        alert(result);
                        favQ = JSON.parse(result);

                        document.getElementById("results").innerHTML = "results: " + favQ["author"]["body"];
                    }
                    else if (request.readyState == 4 && request.status != 200) {
                        document.getElementById("results").innerHTML = "Something is wrong";
                    }
                    else if (request.readyState == 3) {
                        document.getElementById("results").innerHTML = "Too soon.";
                    }
                }
                request.send();
                console.log("4 - request sent");
            }
        </script>
    </head>
    <body onload="getFavQ();">
        <div id="info">
            <h1>My API: Twitter</h1>
            <h2>Found it on Postman.com or </h2>
            <h2 class="notBold">https://favqs.com/api/</h2>
            <h3 class="notBold">I used GET to request the options for a single Tweet lookup. This includes 
                the options of a 200 Successful request Tweet fields, 429 Rate Limit Exceeded, 
                200 Success Deleted Tweet, 200 Success Request Poll Fields, etc.
            </h3>
            <div id="results">

            </div>
        </div>
    </body>
</html>
